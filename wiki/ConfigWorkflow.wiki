= 工作流概念 =

    工作流(Workflow)，是“业务过程的部分或整体在计算机应用环境下的自动化”，它主要解决的是“使在多个参与者之间按照某种预定义的规则传递文档、信息或任务的过程自动进行，从而实现某个预期的业务目标，或者促使此目标的实现”。
 

    流程模板：用来描述业务流程的模板，流程模板定义了工作流的节点、转移、业务数据（一般是业务对象）等信息。对应JAVA类型：com.exedosoft.wf.pt.ProcessTemplate
   
    流程模板变量：流程模板变量被流程模板内的节点和转移共享，可以在节点间传递数据或作为条件分支的判断表达式。 对应JAVA类型：com.exedosoft.wf.pt.PTVar

    业务数据：指与用户交互时产生的数据，这部分数据与具体的业务相关，例如一个销售单，在平台中是销售单这个业务对象。 对应JAVA类型：com.exedosoft.plat.bo.DOBO ,ProcessTemplate 对 DOBO 有引用。

    节点，又称为活动等。工作流模板是由一个个节点按照一定顺序组成的，平台中工作流节点的类型： 对应JAVA类型：com.exedosoft.wf.pt.PTNode

      # 开始节点  一个流程中只能含有一个开始节点
      # 结束节点  一个流程中可以含有多个开始节点
      # 人工节点  需要人工参与，流程才能继续往下走
      # 自动节点  节点的主体是定义一个服务，自动执行后流程继续往下走
      # 循环节点  节点是一个循环，例如一个文件需要一组人循环签署，建模时可以把节点定义为人工节点，然后用自定义动作实现
      # 无条件分支  一个节点无条件流向多个节点
      # 条件分支    条件成立时，流向某一个节点
      # 汇合节点    多个节点流向汇合节点，这多个节点全部执行完后，流程才继续往下走
      # 自动汇合节点  一般用用于自动会签，平台不直接支持，建模时可以把节点定义为人工节点，然后用控制器实现
      # 子流程节点  启动子流程

    转移，也成为转移线等。转移连接节点和节点，条件分支节点连出的转移线需要转移条件，转移条件可以使用是一个表达式（符合javascript语法，例如 > 5，条件分支节点会定义判断表达式a，判断表达式和转移表达式共同成 a > 5的完成的判断表达式，如果同时两个条件 {{{ > 5 || #value# < 0 }}}，替换后{{{  a > 5 || a < 0 }}} ）或者实现com.exedosoft.plat.Access接口的类。

     流程模板执行后对应的是实例：
     # 模板实例（流程实例） com.exedosoft.wf.wfi.ProcessInstance，对应数据表：do_wfi_processinstance
     # 节点实例 com.exedosoft.wf.wfi.NodeInstance，对应数据表：do_wfi_nodeinstance
     # 流程模板变量实例 com.exedosoft.wf.wfi.VarInstance 对应数据表：do_wfi_varinstance

    流程完成后对应的是工作流历史
   
     流程执行完后对应的是工作流历史：
     # 流程历史 com.exedosoft.wf.wfi.ProcessInstance，对应数据表：do_wfi_his_processinstance
     # 节点历史 com.exedosoft.wf.wfi.NodeInstance，对应数据表：do_wfi_his_nodeinstance
     # 流程变量历史 com.exedosoft.wf.wfi.VarInstance 对应数据表：do_wfi_his_varinstance


= 流程示例运行简介 = 


 工作流设计器从配置管理平台首页进入，如下图：

  http://eeplat.googlecode.com/files/wf_index.png 

 点击“工作流建模”，进入如下界面：

   http://eeplat.googlecode.com/files/wf_list.png

 选择“简单报销流程测试”（示例工作流流程模板），点设计流程，进入如下设计界面：
 
   http://eeplat.googlecode.com/files/wf_main.png

  流程由一个判断节点和三个审批节点组成，判断节点判断报销金额，大于1000元和小于1000元分别走不同的分支。
  双击节点进入节点属性编辑界面：

   http://eeplat.googlecode.com/files/wf_node_property.png

   Expense_money为工作流处理的业务对象的属性，针对该属性直接进行判断。双击节点流线进入流向属性界面，如下图所示：

   http://eeplat.googlecode.com/files/wf_line_property.png

	



 示例人员角色如下：

  ||<b>登录账号</b>||<b>登录密码</b>|| *姓名*	||  *角色*      ||
  ||  xw	        ||      1	  ||  小王	||  普通员工	||
  ||  xz	        ||      1	  ||  习总	||  财务主管	||
  ||  wz	        ||      1	  ||  温总	||  副总经理	||
  ||  hz	        ||      1	  ||  胡总	||  总经理      ||

			

  # 以xw登录，填写报销单，金额为800 2000两个报销单。
  # 以wz登录，审批800的报销单
  # 以hz登录，审批2000的报销单
  # 以xz登录，审批800/2000的报销单，流程完成后，然后进入历史数据库。

  工作流配置说明：

  第一步：首先建立业务对象，如报销单业务对象t_expense

  第二步：建立工作流模型，同时相关业务对象设置为t_expense，设置流程启动模板。

   http://eeplat.googlecode.com/files/wf_pt_modify.png

  第三步：建立相应的查询和操作面板，需要如下面板：

  提交者：

    # 我的申请
    # 我的已办结申请

  审批者：

    #  我的申请
    #  我的已办结申请
    #  待审批申请
    #  已审批申请
    #  已办结申请查询
    
  相应的提交、通过、驳回设置表格元素相应的自定义动作，如下所示：